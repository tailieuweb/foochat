{"version":3,"sources":["assets/images/bg.mp4","configs/browserHistory.js","configs/url.js","configs/socket.js","components/Authentication/LoginAdmin.js","components/Authentication/RegisterAdmin.js","components/Authentication/LoginUser.js","components/Authentication/RegisterUser.js","contexts/AppReducer.js","contexts/ConversationState.js","configs/getAvatar.js","components/Chat/User/LogoutButton.js","components/Chat/User/Panel.js","components/Chat/ChatList/Conversation.js","components/Chat/ChatList/ListConversation.js","components/Chat/ChatList/SearchBar.js","components/Chat/ChatList/SearchTile.js","components/Chat/ChatList/ListSearchTile.js","components/Chat/ChatList/ChatList.js","components/Chat/ChatBox/TitleBar.js","components/Chat/ChatBox/SingleMessage.js","components/Chat/ChatBox/TypingIndicator.js","components/Chat/ChatBox/MessageList.js","components/Chat/ChatBox/InputPanel.js","components/Chat/ChatBox/ChatBox.js","components/Chat/User/Info.js","components/Chat/Chat.js","App.js","index.js"],"names":["module","exports","history","createBrowserHistory","url","BASE","LOCAL","socket","io","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","Infinity","on","localStorage","userId","emit","Login","props","success","httpResponse","body","objBody","JSON","parse","statusCode","setState","isLogin","errMessage","message","setItem","token","user","id","username","push","state","password","_isMounted","handleSubmit","bind","onChangeUsername","onChangePassword","this","document","title","e","target","value","preventDefault","info","isLoggin","process","uri","method","headers","stringify","request","post","err","getItem","to","className","autoPlay","muted","loop","src","video_bg","type","onSubmit","htmlFor","onChange","name","autoComplete","spellCheck","length","React","Component","Register","isRegistering","fullname","email","cf_password","onChangeFullname","onChangeEmail","onChangeCfPassword","admin","action","conversations","ready","isEmojiShow","status","refresh","newArray","filter","obj","conversation","_id","inputEvent","console","log","newMessage","cid","initialState","sessionValid","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","useEffect","a","options","Authorization","chattoken","get","removeItem","replace","updateConversations","list","cs","Provider","isReady","updateRefresh","updateConversation","getConversation","find","c","addConversation","addNewMessage","toggleEmoji","updateInputEvent","getAvatar","LogoutButton","useState","isLogout","setLogout","onClick","window","confirm","xmlns","width","height","viewBox","d","Panel","alt","Conversation","otherName","activeClassName","lastSender","lastMessage","ListConversation","useContext","myUsername","myId","receiveId","forEach","el","roomId","chatId","map","key","firstUserName","secondUserName","SearchBar","searchOnFocus","searchOutFocus","searchPeople","placeholder","onFocus","onBlur","event","SearchTile","openConversation","ListSearchTile","listResults","setMouse","currentUser","item","index","slice","onMouseOver","onMouseOut","result","ChatList","isSearchFocusing","updateSearchFocusing","isMouseOverResult","updateMouseOverResult","searchResult","setSearchResult","fetchPeople","query","userCurrent","indexCurrentUser","findIndex","splice","isOver","createId","TitleBar","SingleMessage","ofUser","content","TypingIndicator","MessageList","cvs","messages","setMessages","otherTyping","setOtherTyping","setOtherName","isLoading","setLoading","messageList","uid","isTyping","animateScroll","scrollToBottom","containerId","smooth","duration","Date","now","InputPanel","chatFieldRef","useRef","isSending","setSending","block","setBlock","openEmoji","setOpenEmoji","setChosenEmoji","isBlock","timeout","sendMessage","current","clearTimeout","stoppedTyping","disabled","ref","setTimeout","onKeyPress","keyCode","style","display","onEmojiClick","emojiObject","emoji","flexBasis","ChatBox","otherUsername","firstId","Info","setUser","idGuess","secondId","getUser","rule","idBlock","handleBlock","Chat","match","params","App","exact","path","component","LoginAdmin","RegisterAdmin","LoginUser","RegisterUser","ReactDOM","render","getElementById"],"mappings":"sQAAAA,EAAOC,QAAU,IAA0B,gC,2NCE9BC,EAAUC,c,iECGRC,EALH,CACVC,KAAM,wBACNC,MAAO,yB,SCCHC,E,MAASC,GAAGJ,EAAIE,MAAO,CAC3BG,cAAc,EACdC,kBAAmB,IACnBC,qBAAsB,IACtBC,qBAAsBC,MAGxBN,EAAOO,GAAG,cAAc,WAClBC,aAAaC,QACfT,EAAOU,KAAK,kBAAmBF,aAAaC,WAIjCT,Q,iBCiJAW,E,YAxJd,WAAYC,GAAQ,IAAD,8BAClB,4CAAMA,KAkCPC,QAAU,SAACC,EAAcC,GACxB,IAAMC,EAAUC,KAAKC,MAAMH,GACK,MAA5BD,EAAaK,WAChB,EAAKC,SAAS,CACbC,SAAS,EACTC,WAAYN,EAAQO,WAGrBf,aAAagB,QAAQ,YAAaR,EAAQS,OAC1CjB,aAAagB,QAAQ,SAAUR,EAAQU,KAAKC,IAC5CnB,aAAagB,QAAQ,WAAYR,EAAQU,KAAKE,UAE9C5B,EAAOU,KAAK,aAAcM,EAAQU,KAAKC,IACvChC,EAAQkC,KAAK,iBA9Cd,EAAKC,MAAQ,CACZF,SAAU,GACVG,SAAU,GACVV,SAAS,EACTC,WAAY,IAEb,EAAKU,YAAa,EAClB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBACxB,EAAKE,iBAAmB,EAAKA,iBAAiBF,KAAtB,gBACxB,EAAKrB,QAAU,EAAKA,QAAQqB,KAAb,gBAZG,E,iFAgBlBG,KAAKL,YAAa,EACdK,KAAKL,aAAYM,SAASC,MAAQ,8B,6CAGtCF,KAAKL,YAAa,I,uCAGFQ,GAChBH,KAAKjB,SAAS,CACbQ,SAAUY,EAAEC,OAAOC,U,uCAIJF,GAChBH,KAAKjB,SAAS,CACbW,SAAUS,EAAEC,OAAOC,U,4EAqBFF,G,mFAClBA,EAAEG,kBACEN,KAAKL,W,oBACFY,EAAO,CACZhB,SAAUS,KAAKP,MAAMF,SACrBG,SAAUM,KAAKP,MAAMC,WAEZH,UAAagB,EAAKb,S,uBAC3BM,KAAKjB,SAAS,CACbE,WAAY,sC,0BAIde,KAAKjB,SAAS,CACbyB,UAAU,IAGLC,EAAU,CACfC,IAAKlD,EAAIE,MAAQ,aACjBiD,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBlC,KAAME,KAAKiC,UAAL,eACFN,KAGLO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,EAAKF,QAAQC,EAAcC,M,sIAM7B,OAAOP,aAAa8C,QAAQ,aAC3B,kBAAC,IAAD,CAAUC,GAAG,cAAc1B,MAAM,IAEjC,6BAAS2B,UAAU,aAClB,2BAAOC,UAAQ,EAACC,OAAK,EAACC,MAAI,EAAChC,GAAG,YAC7B,4BAAQiC,IAAKC,IAAUC,KAAK,eAE7B,yBAAKN,UAAU,aACd,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,yBAAd,eACA,0BAAMR,OAAO,OAAOe,SAAU1B,KAAKJ,cAClC,yBAAKuB,UAAU,cACd,2BAAOQ,QAAQ,YAAf,4BACA,2BACCF,KAAK,OACLG,SAAU5B,KAAKF,iBACf+B,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMF,SAClB4B,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,sBACA,2BACCF,KAAK,WACLG,SAAU5B,KAAKD,iBACf8B,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMC,SAClByB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,qBACd,4BACCM,KAAK,SACLN,UAAU,mBAETnB,KAAKP,MAAMT,QACT,cACA,UAG6B,IAAjCgB,KAAKP,MAAMR,WAAW+C,OACtB,2BAAIhC,KAAKP,MAAMR,WAAf,KACG,KACJ,yBAAKkC,UAAU,eACd,kBAAC,IAAD,CACCD,GAAG,kBACHC,UAAU,yEAFX,qF,GA1IYc,IAAMC,WCwNXC,E,YAxNd,WAAY5D,GAAQ,IAAD,8BAClB,4CAAMA,KAsDPC,QAAU,SAACC,EAAcC,GACQ,MAA5BD,EAAaK,WAChB,EAAKC,SAAS,CACbqD,eAAe,EACfnD,WAAY,mBAGb3B,EAAQkC,KAAK,UACT,EAAKG,YACR,EAAKZ,SAAS,CACbqD,eAAe,MA/DlB,EAAK3C,MAAQ,CACZ4C,SAAU,GACVC,MAAO,GACP/C,SAAU,GACVG,SAAU,GACV6C,YAAa,GACbH,eAAe,EACfnD,WAAY,IAEb,EAAKU,YAAa,EAElB,EAAK6C,iBAAmB,EAAKA,iBAAiB3C,KAAtB,gBACxB,EAAK4C,cAAgB,EAAKA,cAAc5C,KAAnB,gBACrB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBACxB,EAAKE,iBAAmB,EAAKA,iBAAiBF,KAAtB,gBACxB,EAAK6C,mBAAqB,EAAKA,mBAAmB7C,KAAxB,gBAC1B,EAAKD,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKrB,QAAU,EAAKA,QAAQqB,KAAb,gBAnBG,E,iFAuBlBG,KAAKL,YAAa,EACdK,KAAKL,aAAYM,SAASC,MAAQ,0B,6CAGtCF,KAAKL,YAAa,I,uCAEFQ,GAChBH,KAAKjB,SAAS,CACbsD,SAAUlC,EAAEC,OAAOC,U,oCAGPF,GACbH,KAAKjB,SAAS,CACbuD,MAAOnC,EAAEC,OAAOC,U,uCAGDF,GAChBH,KAAKjB,SAAS,CACbQ,SAAUY,EAAEC,OAAOC,U,uCAGJF,GAChBH,KAAKjB,SAAS,CACbW,SAAUS,EAAEC,OAAOC,U,yCAGFF,GAClBH,KAAKjB,SAAS,CACbwD,YAAapC,EAAEC,OAAOC,U,mCAoBXF,GAAI,IAAD,OAEf,GADAA,EAAEG,iBACEN,KAAKL,WAAY,CACpB,IAAMY,EAAO,CACZ8B,SAAUrC,KAAKP,MAAM4C,SACrBC,MAAOtC,KAAKP,MAAM6C,MAClB/C,SAAUS,KAAKP,MAAMF,SACrBG,SAAUM,KAAKP,MAAMC,SACrB6C,YAAavC,KAAKP,MAAM8C,YACxBI,OAAO,GAER,KAAKpC,EAAKhB,UAAagB,EAAKb,UAAaa,EAAKgC,aAI7C,YAHAvC,KAAKjB,SAAS,CACbE,WAAY,sCAGP,GAAIsB,EAAKb,WAAaa,EAAKgC,YAIjC,YAHAvC,KAAKjB,SAAS,CACbE,WAAY,0BAIde,KAAKjB,SAAS,CACbqD,eAAe,IAGhB,IAAM3B,EAAU,CACfC,IAAKlD,EAAIE,MAAQ,gBACjBiD,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBlC,KAAME,KAAKiC,UAAL,eACFN,KAILO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,EAAKF,QAAQC,EAAcC,S,+BAK7B,OACC,6BAASyC,UAAU,aAClB,2BAAOC,UAAQ,EAACC,OAAK,EAACC,MAAI,EAAChC,GAAG,YAC7B,4BAAQiC,IAAKC,IAAUC,KAAK,eAE7B,yBAAKN,UAAU,aACd,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,yBAAd,kBACA,0BAAMR,OAAO,OAAOe,SAAU1B,KAAKJ,cAClC,yBAAKuB,UAAU,cACd,2BAAOQ,QAAQ,YAAf,qCACA,2BACCF,KAAK,OACLI,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAM4C,SAClBT,SAAU5B,KAAKwC,iBACfrB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,SAAf,SACA,2BACCF,KAAK,QACLI,KAAK,QACLvC,GAAG,QACHe,MAAOL,KAAKP,MAAM6C,MAClBV,SAAU5B,KAAKyC,cACftB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,4BACA,2BACCE,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMF,SAClBqC,SAAU5B,KAAKF,iBACfqB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,sBACA,2BACCF,KAAK,WACLI,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMC,SAClBkC,SAAU5B,KAAKD,iBACfoB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,eAAf,uCAGA,2BACCF,KAAK,WACLI,KAAK,cACLvC,GAAG,cACHe,MAAOL,KAAKP,MAAM8C,YAClBX,SAAU5B,KAAK0C,mBACfvB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,6BACE/B,KAAKP,MAAMR,YACqB,IAAjCe,KAAKP,MAAMR,WAAW+C,OACrB,2BAAIhC,KAAKP,MAAMR,WAAf,KACG,MAEL,yBAAKkC,UAAU,qBACd,4BACCM,KAAK,SACLN,UAAU,mBAETnB,KAAKP,MAAM2C,cACT,aACA,aAGL,yBAAKjB,UAAU,eACd,kBAAC,IAAD,CAAMD,GAAG,UAAT,uD,GA/Mee,IAAMC,WC0Jd5D,E,YAxJd,WAAYC,GAAQ,IAAD,8BAClB,4CAAMA,KAkCPC,QAAU,SAACC,EAAcC,GACxB,IAAMC,EAAUC,KAAKC,MAAMH,GACK,MAA5BD,EAAaK,WAChB,EAAKC,SAAS,CACbC,SAAS,EACTC,WAAYN,EAAQO,WAGrBf,aAAagB,QAAQ,YAAaR,EAAQS,OAC1CjB,aAAagB,QAAQ,SAAUR,EAAQU,KAAKC,IAC5CnB,aAAagB,QAAQ,WAAYR,EAAQU,KAAKE,UAE9C5B,EAAOU,KAAK,aAAcM,EAAQU,KAAKC,IACvChC,EAAQkC,KAAK,WA9Cd,EAAKC,MAAQ,CACZF,SAAU,GACVG,SAAU,GACVV,SAAS,EACTC,WAAY,IAEb,EAAKU,YAAa,EAClB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBACxB,EAAKE,iBAAmB,EAAKA,iBAAiBF,KAAtB,gBACxB,EAAKrB,QAAU,EAAKA,QAAQqB,KAAb,gBAZG,E,iFAgBlBG,KAAKL,YAAa,EACdK,KAAKL,aAAYM,SAASC,MAAQ,8B,6CAGtCF,KAAKL,YAAa,I,uCAGFQ,GAChBH,KAAKjB,SAAS,CACbQ,SAAUY,EAAEC,OAAOC,U,uCAIJF,GAChBH,KAAKjB,SAAS,CACbW,SAAUS,EAAEC,OAAOC,U,4EAqBFF,G,mFAClBA,EAAEG,kBACEN,KAAKL,W,oBACFY,EAAO,CACZhB,SAAUS,KAAKP,MAAMF,SACrBG,SAAUM,KAAKP,MAAMC,WAEZH,UAAagB,EAAKb,S,uBAC3BM,KAAKjB,SAAS,CACbE,WAAY,sC,0BAIde,KAAKjB,SAAS,CACbyB,UAAU,IAGLC,EAAU,CACfC,IAAKlD,EAAIE,MAAQ,aACjBiD,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBlC,KAAME,KAAKiC,UAAL,eACFN,KAGLO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,EAAKF,QAAQC,EAAcC,M,sIAM7B,OAAOP,aAAa8C,QAAQ,aAC3B,kBAAC,IAAD,CAAUC,GAAG,aAAa1B,MAAM,IAEhC,6BAAS2B,UAAU,aAClB,2BAAOC,UAAQ,EAACC,OAAK,EAACC,MAAI,EAAChC,GAAG,YAC7B,4BAAQiC,IAAKC,IAAUC,KAAK,eAE7B,yBAAKN,UAAU,aACd,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,yBAAd,SACA,0BAAMR,OAAO,OAAOe,SAAU1B,KAAKJ,cAClC,yBAAKuB,UAAU,cACd,2BAAOQ,QAAQ,YAAf,4BACA,2BACCF,KAAK,OACLG,SAAU5B,KAAKF,iBACf+B,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMF,SAClB4B,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,sBACA,2BACCF,KAAK,WACLG,SAAU5B,KAAKD,iBACf8B,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMC,SAClByB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,qBACd,4BACCM,KAAK,SACLN,UAAU,mBAETnB,KAAKP,MAAMT,QACT,cACA,UAG6B,IAAjCgB,KAAKP,MAAMR,WAAW+C,OACtB,2BAAIhC,KAAKP,MAAMR,WAAf,KACG,KACJ,yBAAKkC,UAAU,eACd,kBAAC,IAAD,CACCD,GAAG,YACHC,UAAU,yEAFX,qF,GA1IYc,IAAMC,WCuNXC,E,YAvNd,WAAY5D,GAAQ,IAAD,8BAClB,4CAAMA,KAsDPC,QAAU,SAACC,EAAcC,GACQ,MAA5BD,EAAaK,WAChB,EAAKC,SAAS,CACbqD,eAAe,EACfnD,WAAY,mBAGb3B,EAAQkC,KAAK,UACT,EAAKG,YACR,EAAKZ,SAAS,CACbqD,eAAe,MA/DlB,EAAK3C,MAAQ,CACZ4C,SAAU,GACVC,MAAO,GACP/C,SAAU,GACVG,SAAU,GACV6C,YAAa,GACbH,eAAe,EACfnD,WAAY,IAEb,EAAKU,YAAa,EAElB,EAAK6C,iBAAmB,EAAKA,iBAAiB3C,KAAtB,gBACxB,EAAK4C,cAAgB,EAAKA,cAAc5C,KAAnB,gBACrB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBACxB,EAAKE,iBAAmB,EAAKA,iBAAiBF,KAAtB,gBACxB,EAAK6C,mBAAqB,EAAKA,mBAAmB7C,KAAxB,gBAC1B,EAAKD,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKrB,QAAU,EAAKA,QAAQqB,KAAb,gBAnBG,E,iFAuBlBG,KAAKL,YAAa,EACdK,KAAKL,aAAYM,SAASC,MAAQ,0B,6CAGtCF,KAAKL,YAAa,I,uCAEFQ,GAChBH,KAAKjB,SAAS,CACbsD,SAAUlC,EAAEC,OAAOC,U,oCAGPF,GACbH,KAAKjB,SAAS,CACbuD,MAAOnC,EAAEC,OAAOC,U,uCAGDF,GAChBH,KAAKjB,SAAS,CACbQ,SAAUY,EAAEC,OAAOC,U,uCAGJF,GAChBH,KAAKjB,SAAS,CACbW,SAAUS,EAAEC,OAAOC,U,yCAGFF,GAClBH,KAAKjB,SAAS,CACbwD,YAAapC,EAAEC,OAAOC,U,mCAoBXF,GAAI,IAAD,OAEf,GADAA,EAAEG,iBACEN,KAAKL,WAAY,CACpB,IAAMY,EAAO,CACZ8B,SAAUrC,KAAKP,MAAM4C,SACrBC,MAAOtC,KAAKP,MAAM6C,MAClB/C,SAAUS,KAAKP,MAAMF,SACrBG,SAAUM,KAAKP,MAAMC,SACrB6C,YAAavC,KAAKP,MAAM8C,aAEzB,KAAKhC,EAAKhB,UAAagB,EAAKb,UAAaa,EAAKgC,aAI7C,YAHAvC,KAAKjB,SAAS,CACbE,WAAY,sCAGP,GAAIsB,EAAKb,WAAaa,EAAKgC,YAIjC,YAHAvC,KAAKjB,SAAS,CACbE,WAAY,0BAIde,KAAKjB,SAAS,CACbqD,eAAe,IAGhB,IAAM3B,EAAU,CACfC,IAAKlD,EAAIE,MAAQ,gBACjBiD,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBlC,KAAME,KAAKiC,UAAL,eACFN,KAILO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,EAAKF,QAAQC,EAAcC,S,+BAK7B,OACC,6BAASyC,UAAU,aAClB,2BAAOC,UAAQ,EAACC,OAAK,EAACC,MAAI,EAAChC,GAAG,YAC7B,4BAAQiC,IAAKC,IAAUC,KAAK,eAE7B,yBAAKN,UAAU,aACd,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,yBAAd,0CACA,0BAAMR,OAAO,OAAOe,SAAU1B,KAAKJ,cAClC,yBAAKuB,UAAU,cACd,2BAAOQ,QAAQ,YAAf,qCACA,2BACCF,KAAK,OACLI,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAM4C,SAClBT,SAAU5B,KAAKwC,iBACfrB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,SAAf,SACA,2BACCF,KAAK,QACLI,KAAK,QACLvC,GAAG,QACHe,MAAOL,KAAKP,MAAM6C,MAClBV,SAAU5B,KAAKyC,cACftB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,4BACA,2BACCE,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMF,SAClBqC,SAAU5B,KAAKF,iBACfqB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,YAAf,sBACA,2BACCF,KAAK,WACLI,KAAK,WACLvC,GAAG,WACHe,MAAOL,KAAKP,MAAMC,SAClBkC,SAAU5B,KAAKD,iBACfoB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,yBAAKZ,UAAU,cACd,2BAAOQ,QAAQ,eAAf,uCAGA,2BACCF,KAAK,WACLI,KAAK,cACLvC,GAAG,cACHe,MAAOL,KAAKP,MAAM8C,YAClBX,SAAU5B,KAAK0C,mBACfvB,UAAU,eACVW,aAAa,MACbC,WAAW,WAGb,6BACE/B,KAAKP,MAAMR,YACqB,IAAjCe,KAAKP,MAAMR,WAAW+C,OACrB,2BAAIhC,KAAKP,MAAMR,WAAf,KACG,MAEL,yBAAKkC,UAAU,qBACd,4BACCM,KAAK,SACLN,UAAU,mBAETnB,KAAKP,MAAM2C,cACT,aACA,aAGL,yBAAKjB,UAAU,eACd,kBAAC,IAAD,CAAMD,GAAG,KAAT,uD,GA9Mee,IAAMC,W,eCPd,WAACzC,EAAOmD,GACrB,OAAQA,EAAOnB,MACb,IAAK,SACH,MAAO,CAAEoB,cAAc,YAAKD,EAAOC,eAAgBC,OAAO,GAG5D,IAAK,eACH,OAAO,eAAKrD,EAAZ,CAAmBsD,YAAaH,EAAOI,SAGzC,IAAK,UACH,OAAO,eAAKvD,EAAZ,CAAmBwD,SAAUxD,EAAMwD,UAGrC,IAAK,gBACH,IAAMC,EAAWzD,EAAMoD,cAAcM,QACnC,SAAAC,GAAG,OAAIR,EAAOS,aAAaC,MAAQF,EAAIE,OAEzC,OAAO,eACF7D,EADL,CAEEoD,cAAc,CAAED,EAAOS,cAAV,mBAA2BH,IACxCD,SAAUxD,EAAMwD,UAIpB,IAAK,MACH,MAAO,CAAEJ,cAAc,CAAED,EAAOS,cAAV,mBAA2B5D,EAAMoD,iBAGzD,IAAK,eACH,OAAO,eAAKpD,EAAZ,CAAmB8D,WAAYX,EAAOW,aAGxC,IAAK,cAEH,OADAC,QAAQC,IAAIb,GACL,eACFnD,EADL,CAEEiE,WAAY,CAAEC,IAAKf,EAAOS,aAAaC,IAAKpE,QAAS0D,EAAO1D,WAGhE,QACE,OAAOO,ICpCPmE,EAAe,CACnBf,cAAe,GACfC,OAAO,EACPe,cAAc,EACdZ,SAAS,EACTS,WAAY,CAAEC,IAAK,GAAIzE,QAAS,IAChC6D,aAAa,EACbQ,WAAY,IAGDO,EAAgBC,wBAAcH,GAE9BI,EAAiB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACpBC,qBAAWC,EAAYP,GADH,mBACvCnE,EADuC,KAChC2E,EADgC,KAG9CC,qBAAU,YACR,uCAAC,4BAAAC,EAAA,sDACOC,EAAU,CACd7D,IAAI,GAAD,OAAKlD,EAAIE,MAAT,qCAA2CS,aAAaC,QAC3DuC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,aAI1C3D,IAAQ4D,IAAIH,GAAS,SAASvD,EAAKvC,EAAcC,GAC/C,GAAIsC,GAAmC,MAA5BvC,EAAaK,WACtBX,aAAawG,WAAW,aACxBxG,aAAawG,WAAW,YACxBxG,aAAawG,WAAW,UACxBrH,EAAQsH,QAAQ,SACX,CACL,IAAMxB,EAAMxE,KAAKC,MAAMH,GACvBmG,EAAoBzB,EAAI0B,UAlB7B,2CAAD,yDAsBC,IAEH,IAAMD,EAAsB,SAAAE,GAC1BX,EAAS,CAAE3C,KAAM,SAAUoB,cAAekC,KA+B5C,OACE,kBAACjB,EAAckB,SAAf,CACE3E,MAAO,CACLwC,cAAepD,EAAMoD,cACrBa,WAAYjE,EAAMiE,WAClBX,YAAatD,EAAMsD,YACnBkC,QAASxF,EAAMqD,MACfG,QAASxD,EAAMwD,QACfM,WAAY9D,EAAM8D,WAClB2B,cA7BgB,WACpBd,EAAS,CAAE3C,KAAM,aA6BboD,oBAAqBA,EACrBM,mBAvCqB,SAAAJ,GACzBX,EAAS,CAAE3C,KAAM,gBAAiB4B,aAAc0B,KAuC5CK,gBA5BkB,SAAAzB,GACtB,OAAOlE,EAAMoD,cAAcwC,MAAK,SAAAC,GAAC,OAAIA,EAAEhC,MAAQK,MAAQ,GA4BnD4B,gBArCkB,SAAAR,GACtBX,EAAS,CAAE3C,KAAM,MAAO4B,aAAc0B,KAqClCS,cA1BgB,SAAC,GAA+B,IAA7BnC,EAA4B,EAA5BA,aAAcnE,EAAc,EAAdA,QACrCkF,EAAS,CAAE3C,KAAM,cAAe4B,eAAcnE,aA0B1CuG,YAvBc,SAAAzC,GAClBoB,EAAS,CAAE3C,KAAM,eAAgBuB,YAuB7B0C,iBApBmB,SAAAnC,GACvBa,EAAS,CAAE3C,KAAM,eAAgB8B,kBAsB9BU,IC5FQ0B,EAJG,SAAApG,GAChB,MAAM,mDAAN,OAA0DA,EAA1D,wFCqCaqG,EAnCM,WAAO,IAAD,EACIC,oBAAS,GADb,mBACnBC,EADmB,KACTC,EADS,KAe1B,OAAOD,EACN,kBAAC,IAAD,CAAU5E,GAAG,IAAI1B,MAAM,IAEvB,4BACC2B,UAAU,iBACV6E,QAjBe,YAEH,IADFC,OAAOC,QAAQ,iEAEzB/H,aAAawG,WAAW,aACxBxG,aAAawG,WAAW,YACxBxG,aAAawG,WAAW,UACxBoB,GAAU,MAaV,yBACCI,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRnF,UAAU,IAEV,0BAAMoF,EAAE,+UCLGC,EAtBD,WACb,OACC,yBAAKrF,UAAU,SACd,yBAAKA,UAAU,yCACd,yBAAKA,UAAU,sCACd,yBACCI,IAAKoE,EAAUxH,aAAaoB,UAC5B4B,UAAU,UACVsF,IAAI,cAEL,wBAAItF,UAAU,aAAd,SAID,yBAAKA,UAAU,6DACd,kBAAC,EAAD,UCUUuF,EA3BM,SAAC,GAAiC,IAA/BrD,EAA8B,EAA9BA,aAAcsD,EAAgB,EAAhBA,UACpC,OACE,kBAAC,IAAD,CACEzF,GAAE,sBAAiBmC,EAAaC,KAChCnC,UAAU,iDACVyF,gBAAgB,eAEhB,yBACErF,IAAKoE,EAAUgB,GACfxF,UAAU,UACVsF,IAAI,WAGN,yBAAKtF,UAAU,iEACb,0BAAMA,UAAU,oBAAoBwF,GACnCtD,EAAawD,WACZ,yBAAK1F,UAAU,aACb,uBAAGA,UAAU,8CACVkC,EAAawD,WADhB,KAC8BxD,EAAayD,cAG3C,QC4BGC,EA9CU,SAAAxI,GAAU,IAAD,EACWyI,qBACzClD,GADMjB,EADwB,EACxBA,cAAe0C,EADS,EACTA,gBAIjB0B,EAAa9I,aAAaoB,SAC1B2H,EAAO/I,aAAaC,OAqB1B,OAnBAiG,qBAAU,WACR1G,EAAOO,GAAG,wBAAwB,YAAkC,IAA/BmF,EAA8B,EAA9BA,aAAc8D,EAAgB,EAAhBA,UAC7CD,IAASC,GACX5B,EAAgBlC,QAGnB,IAEHgB,qBAAU,WACJxB,IACFA,EAAcuE,SAAQ,SAAAC,GACpB1J,EAAOU,KAAK,iBAAkB,CAAEiJ,OAAQD,EAAG/D,UAExC/E,EAAMgJ,QAAU1E,EAAcb,OAAS,GAC1C1E,EAAQsH,QAAR,sBAA+B/B,EAAc,GAAGS,SAGnD,CAACT,EAAcb,SAGhB,yBAAKb,UAAU,mEACb,yBAAKA,UAAU,+BACZ0B,EAAc2E,KAAI,SAAAH,GAAE,OACnB,kBAAC,EAAD,CACEI,IAAKJ,EAAG/D,IACRD,aAAcgE,EACdV,UACEM,IAAeI,EAAGK,cACdL,EAAGM,eACHN,EAAGK,sBCjBNE,EAxBG,SAAC,GAAqD,IAAnDC,EAAkD,EAAlDA,cAAeC,EAAmC,EAAnCA,eAAgBC,EAAmB,EAAnBA,aAClD,OACE,yBAAK5G,UAAU,0CACb,yBACEA,UAAU,cACVgF,MAAM,6BACNG,QAAQ,aAER,0BAAMC,EAAE,uGAEV,2BACE9E,KAAK,SACLN,UAAU,wEACV6G,YAAY,wBACZC,QAAS,kBAAMJ,KACfK,OAAQ,SAAAC,GAAK,OAAIL,EAAeK,IAChCvG,SAAU,SAAAuG,GACRJ,EAAaI,EAAM/H,OAAOC,YCGrB+H,EApBI,SAAA7J,GACjB,OACE,yBACE4C,UAAU,mEACV6E,QAAS,WACPzH,EAAM8J,iBAAiB9J,EAAMe,MAG/B,yBACEiC,IAAKoE,EAAUpH,EAAMgB,UACrB4B,UAAU,kCACVsF,IAAI,WAEN,yBAAKtF,UAAU,8EACb,0BAAMA,UAAU,sBAAsB5C,EAAMgB,aCarC+I,EA1BQ,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,YAAaF,EAAiC,EAAjCA,iBAAkBG,EAAe,EAAfA,SAClDC,EAActK,aAAaoB,SAC7BuF,EAAOyD,EAMX,OAJAzD,EAAKO,MAAK,SAACqD,EAAMC,GAAP,OACTD,EAAKnJ,WAAakJ,EAFI,IAEgCE,EAAS,MAE/D7D,EAAK8D,MAJiB,EAIM,EAAE,GAE9B,yBACCzH,UAAU,4BACV0H,YAAa,kBAAML,GAAS,IAC5BM,WAAY,kBAAMN,GAAS,KAE1BD,EAAYf,KAAI,SAACuB,GAAD,OAChB,kBAAC,EAAD,CACCtB,IAAKsB,EAAOzF,IACZ/D,SAAUwJ,EAAOxJ,SACjBD,GAAIyJ,EAAOzF,IACX+E,iBAAkBA,SC+FRW,EA3GE,SAACzK,GAAW,IAAD,EACkByI,qBAAWlD,GAAhDyB,EADmB,EACnBA,gBAAiBH,EADE,EACFA,gBADE,EAEsBS,oBAAS,GAF/B,mBAEpBoD,EAFoB,KAEFC,EAFE,OAGwBrD,oBAAS,GAHjC,mBAGpBsD,EAHoB,KAGDC,EAHC,OAKavD,mBAAS,IALtB,mBAKpBwD,EALoB,KAKNC,EALM,KAOrBpC,EAAO/I,aAAaC,OACpBmL,EAAc,SAACC,GACpB,IAAMjF,EAAU,CACf7D,IAAKlD,EAAIE,MAAJ,wBAA6B8L,GAClC7I,OAAQ,MACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,aAGxC3D,IAAQ4D,IAAIH,GAAS,SAAUvD,EAAKvC,EAAcC,GACjD,IAAIC,EAAUC,KAAKC,MAAMH,GACnB+K,EAActL,aAAaoB,SAE3BmK,GADN/K,EAAUA,EAAQoK,QACeY,WAChC,SAACjB,GAAD,OAAUA,EAAKnJ,WAAakK,KAE7B9K,EAAUA,EAAQiL,OAAOF,EAAmB,EAAG,GACf,MAA5BjL,EAAaK,WAIhBwK,EAAgB,YAAI3K,IAHpB0K,EAAarH,OAAS,MAsDzB,OACC,yBAAKb,UAAU,WACd,yBAAKA,UAAU,aACd,kBAAC,EAAD,MACA,kBAAC,EAAD,CACC0G,cAnDkB,WACrBqB,GAAqB,GACrBK,EAAY,KAkDTzB,eA/CmB,SAACK,GACvBA,EAAM/H,OAAOC,MAAQ,GACrB6I,GAAqB,IA8ClBnB,aAAcwB,IAEbN,GAAqBE,EAMtB,kBAAC,EAAD,CACChI,UAAU,YACVoH,YAAac,EACbb,SAtBsB,SAACqB,GAC3BT,EAAsBS,IAsBlBxB,iBAvDoB,SAAC/I,GACzB,IAAMiF,EAAU,CACf7D,IAAKlD,EAAIE,MAAJ,gCAAqCwJ,EAArC,gBAAiD5H,GACtDqB,OAAQ,MACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,aAIxC3D,IAAQ4D,IAAIH,GAAS,SAAUvD,EAAKvC,EAAcC,GACjD,IAAIsC,GAE4B,MAA5BvC,EAAaK,WAAoB,CACpC,IAAMsE,EAAMxE,KAAKC,MAAMH,GAEC0G,EAAgBhC,EAAIC,aAAaC,OAGxDiC,EAAgBnC,EAAIC,cACpB1F,EAAOU,KAAK,mBAAoB,CAC/BgF,aAAcD,EAAIC,aAClByG,SAAU3L,aAAaC,UAGzB8K,GAAqB,GACrBE,GAAsB,GACtB9L,EAAQkC,KAAR,sBAA4B4D,EAAIC,aAAaC,aAmB5C,kBAAC,EAAD,CACCnC,UAAU,YACVoG,OAAQhJ,EAAMgJ,YCtFLwC,EAbE,SAAC,GAAc,IAAZlI,EAAW,EAAXA,KACnB,OACC,yBAAKV,UAAU,aACd,yBAAKA,UAAU,kBACd,yBAAKA,UAAU,kCACd,yBAAKI,IAAKoE,EAAU9D,GAAOV,UAAU,UAAUsF,IAAI,QACnD,wBAAItF,UAAU,aAAaU,OCcjBmI,EArBO,SAAC,GAA6B,IAA3B9K,EAA0B,EAA1BA,QAASgI,EAAiB,EAAjBA,KAAMrF,EAAW,EAAXA,KACtC,OAAO3C,EAAQ+K,SAAW/C,EACxB,yBAAK/F,UAAU,2BACb,yBACEI,IAAKoE,EAAU9D,GACf4E,IAAI,SACJtF,UAAU,0BAEZ,yBAAKA,UAAU,oCACb,uBAAGA,UAAU,mCAAmCjC,EAAQgL,WAI5D,yBAAK/I,UAAU,2BACb,yBAAKA,UAAU,sCACb,uBAAGA,UAAU,mCAAmCjC,EAAQgL,Y,SCSjDC,EAvBS,SAAC,GAAc,IAAZtI,EAAW,EAAXA,KACzB,OACE,yBAAKV,UAAU,2BACb,yBACEI,IAAKoE,EAAU9D,GACf4E,IAAI,SACJtF,UAAU,0BAEZ,yBAAKA,UAAU,oCACb,yBAAKA,UAAU,mCACb,yBAAKA,UAAU,eACb,yBAAKA,UAAU,WACb,yBAAKA,UAAU,UACf,yBAAKA,UAAU,UACf,yBAAKA,UAAU,gBC2EdiJ,EAnFK,SAAA7L,GAAU,IAAD,EACKyI,qBAAWlD,GAAnCmB,EADmB,EACnBA,QAASvB,EADU,EACVA,WAEX2G,EAAM9L,EAAM8E,aACZjF,EAASD,aAAaC,OAJD,EAKKyH,mBAAS,IALd,mBAKpByE,EALoB,KAKVC,EALU,OAMW1E,oBAAS,GANpB,mBAMpB2E,EANoB,KAMPC,EANO,OAOO5E,mBAAS,IAPhB,mBAOpBc,EAPoB,KAOT+D,EAPS,OAQK7E,oBAAS,GARd,mBAQpB8E,EARoB,KAQTC,EARS,KA2D3B,OAjDAvG,qBAAU,WAGR,GAFAuG,GAAW,GACXL,EAAY,IACRF,EAAI/G,IAAK,CACX,IAAMiB,EAAU,CACd7D,IAAI,GAAD,OAAKlD,EAAIE,MAAT,iCAAuC2M,EAAI/G,KAC9C3C,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,aAI1C3D,IAAQ4D,IAAIH,GAAS,SAASvD,EAAKvC,EAAcC,GAC/C,GAAgC,MAA5BD,EAAaK,WAAoB,CAAC,IAC5B+L,EAAgBjM,KAAKC,MAAMH,GAA3BmM,YACRN,EAAYM,GACZD,GAAW,OAGfjN,EAAOO,GAAG,eAAe,YAAmC,IAAhCyF,EAA+B,EAA/BA,IAAKmH,EAA0B,EAA1BA,IAAKC,EAAqB,EAArBA,SAAUlJ,EAAW,EAAXA,KAC1C8B,IAAQ0G,EAAI/G,KAAOwH,IAAQ1M,IAC7BsM,EAAa7I,GAEX4I,EADEM,IAAaP,GACAO,UAOtB,CAAC9F,EAASoF,EAAI/G,MAEjBe,qBAAU,WACJgG,EAAI/G,KAAOI,GACT2G,EAAI/G,MAAQI,EAAWC,KACzB4G,EAAY,GAAD,mBAAKD,GAAL,CAAe5G,EAAWxE,aAGxC,CAACwE,IAEJW,qBAAU,WACR2G,gBAAcC,eAAe,CAC3BC,YAAa,WACbC,QAAQ,EACRC,SAAU,MAEX,CAACd,EAAUE,EAAaG,IAGzB,yBACExJ,UAAU,gEACV7B,GAAG,YAEFqL,EAEC,GAEAL,EAAS9C,KAAI,SAAAH,GAAE,OACb,kBAAC,EAAD,CACEI,IAAKJ,EAAG/D,KAAO+H,KAAKC,MACpBzJ,KAAMtD,EAAMsD,KACZ3C,QAASmI,EACTH,KAAM9I,OAKXoM,EAAc,kBAAC,EAAD,CAAiB3I,KAAM8E,IAAgB,O,kBCmF7C4E,GAnKI,SAAC,GAAkB,IAAhB5H,EAAe,EAAfA,IAAKmH,EAAU,EAAVA,IAC1BtH,QAAQC,IAAIE,EAAM,KAAOmH,GACzB,IAAMU,EAAeC,iBAAO,MAFQ,EAGmBzE,qBACtDlD,GADOqB,EAH4B,EAG5BA,mBAAoBK,EAHQ,EAGRA,cAAeP,EAHP,EAGOA,QAHP,EAMJY,oBAAS,GANL,mBAM7B6F,EAN6B,KAMlBC,EANkB,OAOV9F,oBAAS,GAPC,mBAO7B+F,EAP6B,KAOtBC,EAPsB,OASFhG,mBAAS,QATP,mBAS7BiG,EAT6B,KASlBC,EATkB,KAUpCvI,QAAQC,IAAIqI,GAVwB,MAWEjG,mBAAS,MAXX,mBAWhBmG,GAXgB,WAkBpC3H,qBAAU,WACT,GAAIY,EAAS,CACZ,IAAM1E,EAAO,CACZjB,GAAIwL,GAECrK,EAAU,CACfC,IAAKlD,EAAIE,MAAJ,eACLiD,OAAQ,OACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,YAEvC/F,KAAME,KAAKiC,UAAL,eACFN,KAILO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,IAAIC,EAAUC,KAAKC,MAAMH,GACO,MAA5BD,EAAaK,aAChB0E,QAAQC,IAAI9E,EAAQoK,OAAOkD,SAC3BJ,EAASlN,EAAQoK,OAAOkD,gBAIzB,CAAChH,IAEJ,IAAIiH,EAAU,KACRjF,EAAa9I,aAAaoB,SAC1B4M,EAAc,WACnB,IAAMjC,EAAUsB,EAAaY,QAAQ/L,MAErC,GADAmL,EAAaY,QAAQ/L,MAAQ,GACxB6J,GAAuB,KAAZA,EAAhB,CACAyB,GAAW,GACX,IAAMpH,EAAU,CACf7D,IAAI,GAAD,OAAKlD,EAAIE,MAAT,qBACHiD,OAAQ,OACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,YAEvC/F,KAAME,KAAKiC,UAAU,CACpB8C,IAAKA,EACLmH,IAAKA,EACLZ,QAASA,EACT3K,SAAU0H,KAIZnG,IAAQC,KAAKwD,GAAS,SAAUvD,EAAKvC,EAAcC,GAClD,GAAgC,MAA5BD,EAAaK,gBACV,CACN,IAAMsE,EAAMxE,KAAKC,MAAMH,GACvB8G,EAAc,CACbnC,aAAcD,EAAIC,aAClBnE,QAASkE,EAAIM,aAGdyB,EAAmB/B,EAAIC,cACnB6I,GAASG,aAAaH,GAC1BI,IACA3O,EAAOU,KAAK,oBAAqB,CAChCgF,aAAcD,EAAIC,aAClBK,WAAYN,EAAIM,aAGlBiI,GAAW,QAIPW,EAAgB,WACrB3O,EAAOU,KAAK,sBAAuB,CAClCsF,IAAKA,EACLmH,IAAKA,EACLC,UAAU,KAIZ,OACC,yBAAK5J,UAAU,iCACd,yBAAKA,UAAU,qEACd,2BACCoL,SAAUX,EACVnK,KAAK,SACL+K,IAAKhB,EACLrK,UAAU,gFACVS,SAAU,WACTjE,EAAOU,KAAK,sBAAuB,CAClCsF,IAAKA,EACLmH,IAAKA,EACLC,UAAU,EACVlJ,KAAMoF,IAEHiF,GAASG,aAAaH,GAC1BA,EAAUO,WAAWH,EAAe,OAErCI,WAAY,SAACvE,GACM,UAAdA,EAAMV,KAAqC,KAAlBU,EAAMwE,SAClCR,KAGFnE,YACC4D,EACG,wBACA,0BAGL,yBACCzK,UAAU,4BACVyL,MAAO,CAAEC,QAASf,IAElB,kBAAC,KAAD,CAAagB,aApHI,SAAC3E,EAAO4E,GAC5Bf,EAAee,GACfvB,EAAaY,QAAQ/L,OAAS0M,EAAYC,UAoHxC,yBACC7L,UAAU,YACV6E,QAAS,kBACR+F,EAA2B,SAAdD,EAAuB,QAAU,SAE/Cc,MAAO,CAACC,QAASjB,EAAM,OAAO,YAGhC,4BACCzK,UAAU,uEACVyL,MAAO,CAAEK,UAAW,IACpBjH,QAASmG,EACTI,SAAUb,GAAWE,GAEpBF,EACA,yBAAKvK,UAAU,WAAf,KAEA,yBAAKA,UAAU,gDACd,yBACCA,UAAU,uBACVmF,QAAQ,gBACRH,MAAM,8BAEN,0BAAMI,EAAE,iFCzGA2G,GA/CC,SAAC,GAAwB,IAAtB3F,EAAqB,EAArBA,OAAQnJ,EAAa,EAAbA,OAAa,EAOnC4I,qBAAWlD,GALdsB,EAFsC,EAEtCA,gBACAD,EAHsC,EAGtCA,mBACAI,EAJsC,EAItCA,gBACAC,EALsC,EAKtCA,cACAP,EANsC,EAMtCA,QAEKoF,EAAMjF,EAAgBmC,GACtB4F,GACJ/O,IAAWiM,EAAI+C,QAAU/C,EAAI1C,eAAiB0C,EAAI3C,gBAAkB,GAoBtE,OAnBArD,qBAAU,WACLY,GACHtH,EAAOO,GAAG,mBAAmB,YAAmC,IAAhCmF,EAA+B,EAA/BA,aAAcK,EAAiB,EAAjBA,WAE7C,GADY0B,EAAgB/B,EAAaC,KAChC,CACR,GAAInF,aAAaoB,WAAa8D,EAAawD,WAC1C,OACD1B,EAAmB9B,GACnBmC,EAAc,CACbnC,aAAcA,EACdnE,QAASwE,SAGV6B,EAAgBlC,QAIjB,CAAC4B,IAGH,yBAAK9D,UAAU,WACd,yBAAKA,UAAU,YACd,kBAAC,EAAD,CAAUU,KAAMsL,EAAehM,UAAU,eACzC,kBAAC,EAAD,CAAaU,KAAMsL,EAAe9J,aAAcgH,IAChD,yBAAKlJ,UAAU,oBACd,kBAAC,GAAD,CACCwC,IAAK4D,EACLuD,IAAK1M,EACL+C,UAAU,uBC0EDkM,GArHF,SAAC9O,GAAW,IAAD,EACCsH,mBAAS,IADV,mBAChBxG,EADgB,KACViO,EADU,OAEGzH,oBAAS,GAFZ,mBAETgG,GAFS,aAGOhG,oBAAS,GAHhB,gCAIcmB,qBAAWlD,IAAxCsB,EAJe,EAIfA,gBAAiBH,EAJF,EAIEA,QACnBoF,EAAMjF,EAAgB7G,EAAMgJ,QAC9BgG,EAAU,GACVlD,IACHkD,EAAUhP,EAAMH,SAAWiM,EAAI+C,QAAU/C,EAAImD,SAAWnD,EAAI+C,QAC5D5J,QAAQC,IAAI8J,IAEb,IAAIhN,EAAO,GACK,KAAZgN,IACHhN,EAAO,CACNjB,GAAIiO,IAmDN,OA1BAlJ,qBAAU,WACT,GAAIY,EAAS,EACI,WACf,IAAMxE,EAAU,CACfC,IAAKlD,EAAIE,MAAJ,eACLiD,OAAQ,OACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,YAEvC/F,KAAME,KAAKiC,UAAL,eACFN,KAILO,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACzC,IAAIC,EAAUC,KAAKC,MAAMH,GACO,MAA5BD,EAAaK,YAChBwO,EAAQ3O,EAAQoK,WAInB0E,MAEC,CAACF,IAGH,yBAAKpM,UAAU,WACC,SAAd9B,EAAKqO,KACL,yBAAKvM,UAAU,aACd,yBAAKA,UAAU,4CACd,gDAED,yBAAKA,UAAU,QACd,wBAAIA,UAAU,oBAAd,qBACA,4BACC,kCACK,IACJ,0BAAMA,UAAU,eAAe9B,EAAKiE,MAErC,oDAEC,0BAAMnC,UAAU,eACd9B,EAAKgD,WAGR,wCACW,IACV,0BAAMlB,UAAU,eACd9B,EAAKE,WAGR,qCACQ,IACP,0BAAM4B,UAAU,eACd9B,EAAKiD,UAKV,wBAAInB,UAAU,SACd,yBAAKA,UAAU,QACd,4BACC6E,QAAS,kBApFK,SAAC2H,GACpB,GAAI1I,EAAS,CACZ,IAAMxE,EAAU,CACfC,IAAKlD,EAAIE,MAAQ,kBACjBiD,OAAQ,OACRC,QAAS,CACR,eAAgB,mBAChB4D,cAAc,UAAD,OAAYrG,aAAasG,YAEvC/F,KAAME,KAAKiC,UAAU,CACpBvB,GAAIqO,KAGN7M,IAAQC,KAAKN,GAAS,SAACO,EAAKvC,EAAcC,GACT,MAA5BD,EAAaK,YAChB+M,GAAS,OAqEQ+B,CAAYL,IAC3B9L,KAAK,SACLN,UAAU,kBAHX,mBAUF,KCtFW0M,GAvBF,SAACtP,GACb,IAAMH,EAASD,aAAaC,OACtBmJ,EAAShJ,EAAMuP,MAAMC,OAAOzO,GAMlC,OAJA+E,qBAAU,WACTpE,SAASC,MAAQ,SACf,IAGF,kBAAC,EAAD,KACC,yBAAKiB,UAAU,QACd,yBAAKA,UAAU,mBACd,yBAAKA,UAAU,iBACd,kBAAC,EAAD,CAAUoG,OAAQA,IAClB,kBAAC,GAAD,CAASA,OAAQA,EAAQnJ,OAAQA,IACjC,kBAAC,GAAD,CAAMmJ,OAAQA,EAAQnJ,OAAQA,SCerB4P,I,6MAlBb,OACC,kBAAC,IAAD,CAAQ1Q,QAASA,GAChB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAO2Q,OAAK,EAACC,KAAK,SAASC,UAAWC,IACtC,kBAAC,IAAD,CACCH,OAAK,EACLC,KAAK,kBACLC,UAAWE,IAEZ,kBAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,IAAIC,UAAWG,IACjC,kBAAC,IAAD,CAAOL,OAAK,EAACC,KAAK,YAAYC,UAAWI,IACzC,kBAAC,IAAD,CAAON,OAAK,EAACC,KAAK,cAAcC,UAAWN,KAC3C,kBAAC,IAAD,CAAOI,OAAK,EAACC,KAAK,kBAAkBC,UAAWN,W,GAdlC5L,IAAMC,YCbxBsM,IAASC,OAAO,kBAAC,GAAD,MAASxO,SAASyO,eAAe,W","file":"static/js/main.b250c890.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.e9130941.mp4\";","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n","const url = {\r\n  BASE: 'http://localhost:3003',\r\n  LOCAL: 'http://localhost:3003'\r\n};\r\n\r\nexport default url;\r\n","import io from 'socket.io-client';\r\nimport url from './url';\r\n\r\nconst socket = io(url.LOCAL, {\r\n  reconnection: true,\r\n  reconnectionDelay: 1000,\r\n  reconnectionDelayMax: 5000,\r\n  reconnectionAttempts: Infinity\r\n});\r\n\r\nsocket.on('disconnect', () => {\r\n  if (localStorage.userId) {\r\n    socket.emit('user-setOffline', localStorage.userId);\r\n  }\r\n});\r\n\r\nexport default socket;\r\n","import React from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport request from \"request\";\r\nimport { history } from \"../../configs/browserHistory\";\r\nimport url from \"../../configs/url\";\r\nimport socket from \"../../configs/socket\";\r\nimport video_bg from \"../../assets/images/bg.mp4\";\r\n\r\nclass Login extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tisLogin: false,\r\n\t\t\terrMessage: \"\",\r\n\t\t};\r\n\t\tthis._isMounted = false;\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.onChangeUsername = this.onChangeUsername.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t\tthis.success = this.success.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tif (this._isMounted) document.title = \"Đăng nhập\";\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tonChangeUsername(e) {\r\n\t\tthis.setState({\r\n\t\t\tusername: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangePassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tpassword: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tsuccess = (httpResponse, body) => {\r\n\t\tconst objBody = JSON.parse(body);\r\n\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\terrMessage: objBody.message,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(\"chattoken\", objBody.token);\r\n\t\t\tlocalStorage.setItem(\"userId\", objBody.user.id);\r\n\t\t\tlocalStorage.setItem(\"username\", objBody.user.username);\r\n\r\n\t\t\tsocket.emit(\"user-login\", objBody.user.id);\r\n\t\t\thistory.push(\"/admin/chat\");\r\n\t\t}\r\n\t};\r\n\r\n\tasync handleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tif (this._isMounted) {\r\n\t\t\tconst info = {\r\n\t\t\t\tusername: this.state.username,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t};\r\n\t\t\tif (!info.username || !info.password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Please input username or password\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoggin: true,\r\n\t\t\t});\r\n\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + \"/api/login\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...info,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tthis.success(httpResponse, body);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn localStorage.getItem(\"chattoken\") ? (\r\n\t\t\t<Redirect to=\"/admin/chat\" push={true} />\r\n\t\t) : (\r\n\t\t\t<section className=\"auth-page\">\r\n\t\t\t\t<video autoPlay muted loop id=\"bg-video\">\r\n\t\t\t\t\t<source src={video_bg} type=\"video/mp4\" />\r\n\t\t\t\t</video>\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"display-screen\">\r\n\t\t\t\t\t\t<h1 className=\"text-center display-4\">Login Admin</h1>\r\n\t\t\t\t\t\t<form method=\"POST\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\">Tên tài khoản</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeUsername}\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">Mật khẩu</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group submit\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.isLogin\r\n\t\t\t\t\t\t\t\t\t\t? \"Processsing\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Login\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.state.errMessage.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t<p>{this.state.errMessage}.</p>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/admin/register\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"inline-block text-sm text-blue-500 align-baseline hover:text-blue-800\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tBạn chưa có tài khoản? Đăng ký nào!\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport request from \"request\";\r\nimport url from \"../../configs/url\";\r\nimport { history } from \"../../configs/browserHistory\";\r\nimport video_bg from \"../../assets/images/bg.mp4\";\r\n\r\nclass Register extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfullname: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tcf_password: \"\",\r\n\t\t\tisRegistering: false,\r\n\t\t\terrMessage: \"\",\r\n\t\t};\r\n\t\tthis._isMounted = false;\r\n\r\n\t\tthis.onChangeFullname = this.onChangeFullname.bind(this);\r\n\t\tthis.onChangeEmail = this.onChangeEmail.bind(this);\r\n\t\tthis.onChangeUsername = this.onChangeUsername.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t\tthis.onChangeCfPassword = this.onChangeCfPassword.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.success = this.success.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tif (this._isMounted) document.title = \"Đăng ký\";\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\tonChangeFullname(e) {\r\n\t\tthis.setState({\r\n\t\t\tfullname: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeEmail(e) {\r\n\t\tthis.setState({\r\n\t\t\temail: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeUsername(e) {\r\n\t\tthis.setState({\r\n\t\t\tusername: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangePassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tpassword: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeCfPassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tcf_password: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tsuccess = (httpResponse, body) => {\r\n\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisRegistering: false,\r\n\t\t\t\terrMessage: \"Co loi xay ra\",\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\thistory.push(\"/admin\");\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisRegistering: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\thandleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tif (this._isMounted) {\r\n\t\t\tconst info = {\r\n\t\t\t\tfullname: this.state.fullname,\r\n\t\t\t\temail: this.state.email,\r\n\t\t\t\tusername: this.state.username,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\tcf_password: this.state.cf_password,\r\n\t\t\t\tadmin: true,\r\n\t\t\t};\r\n\t\t\tif (!info.username || !info.password || !info.cf_password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Please input username or password\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t} else if (info.password !== info.cf_password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Password do not match\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tisRegistering: true,\r\n\t\t\t});\r\n\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + \"/api/register\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...info,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tthis.success(httpResponse, body);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section className=\"auth-page\">\r\n\t\t\t\t<video autoPlay muted loop id=\"bg-video\">\r\n\t\t\t\t\t<source src={video_bg} type=\"video/mp4\" />\r\n\t\t\t\t</video>\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"display-screen\">\r\n\t\t\t\t\t\t<h1 className=\"text-center display-4\">Register Admin</h1>\r\n\t\t\t\t\t\t<form method=\"POST\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"fullname\">Tên đầy đủ</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"fullname\"\r\n\t\t\t\t\t\t\t\t\tid=\"fullname\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.fullname}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeFullname}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"email\">Email</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeEmail}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\">Tên tài khoản</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeUsername}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">Mật khẩu</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"cf_password\">\r\n\t\t\t\t\t\t\t\t\tXác nhận mật khẩu\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname=\"cf_password\"\r\n\t\t\t\t\t\t\t\t\tid=\"cf_password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.cf_password}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeCfPassword}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{this.state.errMessage &&\r\n\t\t\t\t\t\t\t\tthis.state.errMessage.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t\t<p>{this.state.errMessage}.</p>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group submit\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.isRegistering\r\n\t\t\t\t\t\t\t\t\t\t? \"Processing\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Register\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/admin\">Tôi đã có tài khoản!</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","import React from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport request from \"request\";\r\nimport { history } from \"../../configs/browserHistory\";\r\nimport url from \"../../configs/url\";\r\nimport socket from \"../../configs/socket\";\r\nimport video_bg from \"../../assets/images/bg.mp4\";\r\n\r\nclass Login extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tisLogin: false,\r\n\t\t\terrMessage: \"\",\r\n\t\t};\r\n\t\tthis._isMounted = false;\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.onChangeUsername = this.onChangeUsername.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t\tthis.success = this.success.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tif (this._isMounted) document.title = \"Đăng nhập\";\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tonChangeUsername(e) {\r\n\t\tthis.setState({\r\n\t\t\tusername: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangePassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tpassword: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tsuccess = (httpResponse, body) => {\r\n\t\tconst objBody = JSON.parse(body);\r\n\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\terrMessage: objBody.message,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(\"chattoken\", objBody.token);\r\n\t\t\tlocalStorage.setItem(\"userId\", objBody.user.id);\r\n\t\t\tlocalStorage.setItem(\"username\", objBody.user.username);\r\n\r\n\t\t\tsocket.emit(\"user-login\", objBody.user.id);\r\n\t\t\thistory.push(\"/chat\");\r\n\t\t}\r\n\t};\r\n\r\n\tasync handleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tif (this._isMounted) {\r\n\t\t\tconst info = {\r\n\t\t\t\tusername: this.state.username,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t};\r\n\t\t\tif (!info.username || !info.password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Please input username or password\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoggin: true,\r\n\t\t\t});\r\n\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + \"/api/login\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...info,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tthis.success(httpResponse, body);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn localStorage.getItem(\"chattoken\") ? (\r\n\t\t\t<Redirect to=\"/user/chat\" push={true} />\r\n\t\t) : (\r\n\t\t\t<section className=\"auth-page\">\r\n\t\t\t\t<video autoPlay muted loop id=\"bg-video\">\r\n\t\t\t\t\t<source src={video_bg} type=\"video/mp4\" />\r\n\t\t\t\t</video>\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"display-screen\">\r\n\t\t\t\t\t\t<h1 className=\"text-center display-4\">Login</h1>\r\n\t\t\t\t\t\t<form method=\"POST\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\">Tên tài khoản</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeUsername}\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">Mật khẩu</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group submit\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.isLogin\r\n\t\t\t\t\t\t\t\t\t\t? \"Processsing\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Login\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.state.errMessage.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t<p>{this.state.errMessage}.</p>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"inline-block text-sm text-blue-500 align-baseline hover:text-blue-800\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tBạn chưa có tài khoản? Đăng ký nào!\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport request from \"request\";\r\nimport url from \"../../configs/url\";\r\nimport { history } from \"../../configs/browserHistory\";\r\nimport video_bg from \"../../assets/images/bg.mp4\";\r\n\r\nclass Register extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfullname: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tcf_password: \"\",\r\n\t\t\tisRegistering: false,\r\n\t\t\terrMessage: \"\",\r\n\t\t};\r\n\t\tthis._isMounted = false;\r\n\r\n\t\tthis.onChangeFullname = this.onChangeFullname.bind(this);\r\n\t\tthis.onChangeEmail = this.onChangeEmail.bind(this);\r\n\t\tthis.onChangeUsername = this.onChangeUsername.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t\tthis.onChangeCfPassword = this.onChangeCfPassword.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.success = this.success.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tif (this._isMounted) document.title = \"Đăng ký\";\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\tonChangeFullname(e) {\r\n\t\tthis.setState({\r\n\t\t\tfullname: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeEmail(e) {\r\n\t\tthis.setState({\r\n\t\t\temail: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeUsername(e) {\r\n\t\tthis.setState({\r\n\t\t\tusername: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangePassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tpassword: e.target.value,\r\n\t\t});\r\n\t}\r\n\tonChangeCfPassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tcf_password: e.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\tsuccess = (httpResponse, body) => {\r\n\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisRegistering: false,\r\n\t\t\t\terrMessage: \"Co loi xay ra\",\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\thistory.push(\"/admin\");\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisRegistering: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\thandleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tif (this._isMounted) {\r\n\t\t\tconst info = {\r\n\t\t\t\tfullname: this.state.fullname,\r\n\t\t\t\temail: this.state.email,\r\n\t\t\t\tusername: this.state.username,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\tcf_password: this.state.cf_password,\r\n\t\t\t};\r\n\t\t\tif (!info.username || !info.password || !info.cf_password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Please input username or password\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t} else if (info.password !== info.cf_password) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMessage: \"Password do not match\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tisRegistering: true,\r\n\t\t\t});\r\n\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + \"/api/register\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...info,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tthis.success(httpResponse, body);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section className=\"auth-page\">\r\n\t\t\t\t<video autoPlay muted loop id=\"bg-video\">\r\n\t\t\t\t\t<source src={video_bg} type=\"video/mp4\" />\r\n\t\t\t\t</video>\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<div className=\"display-screen\">\r\n\t\t\t\t\t\t<h1 className=\"text-center display-4\">Đăng ký tài khoản</h1>\r\n\t\t\t\t\t\t<form method=\"POST\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"fullname\">Tên đầy đủ</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"fullname\"\r\n\t\t\t\t\t\t\t\t\tid=\"fullname\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.fullname}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeFullname}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"email\">Email</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeEmail}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\">Tên tài khoản</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeUsername}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\">Mật khẩu</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"cf_password\">\r\n\t\t\t\t\t\t\t\t\tXác nhận mật khẩu\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname=\"cf_password\"\r\n\t\t\t\t\t\t\t\t\tid=\"cf_password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.cf_password}\r\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeCfPassword}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tspellCheck=\"false\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{this.state.errMessage &&\r\n\t\t\t\t\t\t\t\tthis.state.errMessage.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t\t<p>{this.state.errMessage}.</p>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group submit\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.isRegistering\r\n\t\t\t\t\t\t\t\t\t\t? \"Processing\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Register\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/\">Tôi đã có tài khoản!</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","export default (state, action) => {\r\n  switch (action.type) {\r\n    case 'update': {\r\n      return { conversations: [...action.conversations], ready: true };\r\n    }\r\n\r\n    case 'toggle-emoji': {\r\n      return { ...state, isEmojiShow: action.status };\r\n    }\r\n\r\n    case 'refresh': {\r\n      return { ...state, refresh: !state.refresh };\r\n    }\r\n\r\n    case 'update-single': {\r\n      const newArray = state.conversations.filter(\r\n        obj => action.conversation._id !== obj._id\r\n      );\r\n      return {\r\n        ...state,\r\n        conversations: [action.conversation, ...newArray],\r\n        refresh: !state.refresh\r\n      };\r\n    }\r\n\r\n    case 'add': {\r\n      return { conversations: [action.conversation, ...state.conversations] };\r\n    }\r\n\r\n    case 'update-input': {\r\n      return { ...state, inputEvent: action.inputEvent };\r\n    }\r\n\r\n    case 'new-message': {\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        newMessage: { cid: action.conversation._id, message: action.message }\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { createContext, useReducer, useEffect } from 'react';\r\nimport AppReducer from './AppReducer';\r\nimport request from 'request';\r\nimport url from '../configs/url';\r\nimport { history } from '../configs/browserHistory';\r\nconst initialState = {\r\n  conversations: [],\r\n  ready: false,\r\n  sessionValid: true,\r\n  refresh: false,\r\n  newMessage: { cid: '', message: {} },\r\n  isEmojiShow: false,\r\n  inputEvent: {}\r\n};\r\n\r\nexport const GlobalContext = createContext(initialState);\r\n\r\nexport const GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    (async function fetchData() {\r\n      const options = {\r\n        uri: `${url.LOCAL}/api/conversation-list?id=${localStorage.userId}`,\r\n        method: 'get',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${localStorage.chattoken}`\r\n        }\r\n      };\r\n\r\n      request.get(options, function(err, httpResponse, body) {\r\n        if (err || httpResponse.statusCode !== 200) {\r\n          localStorage.removeItem('chattoken');\r\n          localStorage.removeItem('username');\r\n          localStorage.removeItem('userId');\r\n          history.replace('/');\r\n        } else {\r\n          const obj = JSON.parse(body);\r\n          updateConversations(obj.list);\r\n        }\r\n      });\r\n    })();\r\n  }, []);\r\n\r\n  const updateConversations = cs => {\r\n    dispatch({ type: 'update', conversations: cs });\r\n  };\r\n\r\n  const updateConversation = cs => {\r\n    dispatch({ type: 'update-single', conversation: cs });\r\n  };\r\n\r\n  const addConversation = cs => {\r\n    dispatch({ type: 'add', conversation: cs });\r\n  };\r\n\r\n  const updateRefresh = () => {\r\n    dispatch({ type: 'refresh' });\r\n  };\r\n\r\n  const getConversation = cid => {\r\n    return state.conversations.find(c => c._id === cid) || 0;\r\n  };\r\n\r\n  const addNewMessage = ({ conversation, message }) => {\r\n    dispatch({ type: 'new-message', conversation, message });\r\n  };\r\n\r\n  const toggleEmoji = status => {\r\n    dispatch({ type: 'toggle-emoji', status });\r\n  };\r\n\r\n  const updateInputEvent = inputEvent => {\r\n    dispatch({ type: 'update-input', inputEvent });\r\n  };\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        conversations: state.conversations,\r\n        newMessage: state.newMessage,\r\n        isEmojiShow: state.isEmojiShow,\r\n        isReady: state.ready,\r\n        refresh: state.refresh,\r\n        inputEvent: state.inputEvent,\r\n        updateRefresh: updateRefresh,\r\n        updateConversations: updateConversations,\r\n        updateConversation: updateConversation,\r\n        getConversation: getConversation,\r\n        addConversation: addConversation,\r\n        addNewMessage: addNewMessage,\r\n        toggleEmoji: toggleEmoji,\r\n        updateInputEvent: updateInputEvent\r\n      }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n","const getAvatar = username => {\r\n  return `https://ui-avatars.com/api/?uppercase=true&name=${username}&rounded=true&bold=true&background=65a69a&color=fff&size=128&length=4&font-size=0.2`;\r\n};\r\n\r\nexport default getAvatar;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst LogoutButton = () => {\r\n\tconst [isLogout, setLogout] = useState(false);\r\n\r\n\tconst doLogout = () => {\r\n\t\tvar flag = window.confirm(\"Bạn có muốn đăng xuất không?\");\r\n\t\tif (flag === true) {\r\n\t\t\tlocalStorage.removeItem(\"chattoken\");\r\n\t\t\tlocalStorage.removeItem(\"username\");\r\n\t\t\tlocalStorage.removeItem(\"userId\");\r\n\t\t\tsetLogout(true);\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\treturn isLogout ? (\r\n\t\t<Redirect to=\"/\" push={true} />\r\n\t) : (\r\n\t\t<button\r\n\t\t\tclassName=\"btn btn-danger\"\r\n\t\t\tonClick={doLogout}\r\n\t\t>\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\twidth=\"16\"\r\n\t\t\t\theight=\"16\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tclassName=\"\"\r\n\t\t\t>\r\n\t\t\t\t<path d=\"M10 9.408l2.963 2.592-2.963 2.592v-1.592h-8v-2h8v-1.592zm-2-4.408v4h-8v6h8v4l8-7-8-7zm6-3c-1.787 0-3.46.474-4.911 1.295l.228.2 1.396 1.221c1.004-.456 2.114-.716 3.287-.716 4.411 0 8 3.589 8 8s-3.589 8-8 8c-1.173 0-2.283-.26-3.288-.715l-1.396 1.221-.228.2c1.452.82 3.125 1.294 4.912 1.294 5.522 0 10-4.477 10-10s-4.478-10-10-10z\" />\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default LogoutButton;\r\n","import React from \"react\";\r\n\r\nimport getAvatar from \"../../../configs/getAvatar\";\r\nimport LogoutButton from \"./LogoutButton\";\r\n\r\nconst Panel = () => {\r\n\treturn (\r\n\t\t<div className=\"panel\">\r\n\t\t\t<div className=\"d-flex justify-content-center bg-part\">\r\n\t\t\t\t<div className=\"col-lg-8 d-flex align-items-center\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={getAvatar(localStorage.username)}\r\n\t\t\t\t\t\tclassName=\"avt-ico\"\r\n\t\t\t\t\t\talt=\"My avatar\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<h1 className=\"display-5\">\r\n\t\t\t\t\t\tChat\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col-lg-4 d-flex align-items-center justify-content-center\">\r\n\t\t\t\t\t<LogoutButton />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Panel;\r\n","import React from 'react';\r\nimport getAvatar from '../../../configs/getAvatar';\r\nimport { NavLink } from 'react-router-dom';\r\nconst Conversation = ({ conversation, otherName }) => {\r\n  return (\r\n    <NavLink\r\n      to={`/admin/chat/${conversation._id}`}\r\n      className='flex h-16 max-w-full rounded-lg cursor-pointer'\r\n      activeClassName='bg-gray-300'\r\n    >\r\n      <img\r\n        src={getAvatar(otherName)}\r\n        className='avt-ico'\r\n        alt='avatar'\r\n      />\r\n\r\n      <div className='hidden md:flex flex-col h-full justify-center overflow-hidden'>\r\n        <span className='display-username'>{otherName}</span>\r\n        {conversation.lastSender ? (\r\n          <div className='flex mr-2'>\r\n            <p className='text-sm  text-gray-700 truncate max-w-full'>\r\n              {conversation.lastSender}: {conversation.lastMessage}\r\n            </p>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default Conversation;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport Conversation from './Conversation';\r\n\r\nimport { GlobalContext } from '../../../contexts/ConversationState';\r\nimport { history } from '../../../configs/browserHistory';\r\nimport socket from '../../../configs/socket';\r\nconst ListConversation = props => {\r\n  const { conversations, addConversation } = useContext(\r\n    GlobalContext\r\n  );\r\n\r\n  const myUsername = localStorage.username;\r\n  const myId = localStorage.userId;\r\n\r\n  useEffect(() => {\r\n    socket.on('add-new-conversation', ({ conversation, receiveId }) => {\r\n      if (myId === receiveId) {\r\n        addConversation(conversation);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (conversations) {\r\n      conversations.forEach(el => {\r\n        socket.emit('user-join-room', { roomId: el._id });\r\n      });\r\n      if (!props.chatId && conversations.length > 0) {\r\n        history.replace(`/admin/chat/${conversations[0]._id}`);\r\n      }\r\n    }\r\n  }, [conversations.length]);\r\n\r\n  return (\r\n    <div className='flex flex-col items-center overflow-y-auto flex-grow max-height'>\r\n      <div className='w-full px-2 overflow-y-auto'>\r\n        {conversations.map(el => (\r\n          <Conversation\r\n            key={el._id}\r\n            conversation={el}\r\n            otherName={\r\n              myUsername === el.firstUserName\r\n                ? el.secondUserName\r\n                : el.firstUserName\r\n            }\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListConversation;\r\n","import React from 'react';\r\n\r\nconst SearchBar = ({ searchOnFocus, searchOutFocus, searchPeople }) => {\r\n  return (\r\n    <div className='box-search px-2 mb-4 position-relative'>\r\n      <svg\r\n        className='center-icon'\r\n        xmlns='http://www.w3.org/2000/svg'\r\n        viewBox='0 0 20 20'\r\n      >\r\n        <path d='M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z'></path>\r\n      </svg>\r\n      <input\r\n        type='search'\r\n        className='w-full px-12 py-2 bg-gray-200 text-gray-700 rounded-full outline-none'\r\n        placeholder='Tìm kiếm user'\r\n        onFocus={() => searchOnFocus()}\r\n        onBlur={event => searchOutFocus(event)}\r\n        onChange={event => {\r\n          searchPeople(event.target.value);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import React from 'react';\r\nimport getAvatar from '../../../configs/getAvatar';\r\nconst SearchTile = props => {\r\n  return (\r\n    <div\r\n      className='flex h-12 max-w-full hover:bg-gray-300 rounded-lg cursor-pointer'\r\n      onClick={() => {\r\n        props.openConversation(props.id);\r\n      }}\r\n    >\r\n      <img\r\n        src={getAvatar(props.username)}\r\n        className='h-12 w-12 mx-4 p-1 rounded-full'\r\n        alt='avatar'\r\n      />\r\n      <div className='hidden md:flex flex-col h-full justify-center items-center overflow-hidden'>\r\n        <span className='text-base truncate'>{props.username}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchTile;\r\n","import React from \"react\";\r\nimport SearchTile from \"./SearchTile\";\r\n\r\nconst ListSearchTile = ({ listResults, openConversation, setMouse }) => {\r\n\tconst currentUser = localStorage.username;\r\n\tvar list = listResults;\r\n\tvar indexCurrentUser = 0;\r\n\tlist.find((item, index) =>\r\n\t\titem.username === currentUser ? (indexCurrentUser === index) : \"\"\r\n\t);\r\n  list.slice(indexCurrentUser,1,1);\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"px-2 mr-1 overflow-y-auto\"\r\n\t\t\tonMouseOver={() => setMouse(true)}\r\n\t\t\tonMouseOut={() => setMouse(false)}\r\n\t\t>\r\n\t\t\t{listResults.map((result) => (\r\n\t\t\t\t<SearchTile\r\n\t\t\t\t\tkey={result._id}\r\n\t\t\t\t\tusername={result.username}\r\n\t\t\t\t\tid={result._id}\r\n\t\t\t\t\topenConversation={openConversation}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ListSearchTile;\r\n","import React, { useState, useContext } from \"react\";\r\nimport Panel from \"../User/Panel\";\r\nimport ListConversation from \"./ListConversation\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport url from \"../../../configs/url\";\r\nimport request from \"request\";\r\nimport { GlobalContext } from \"../../../contexts/ConversationState\";\r\nimport { history } from \"../../../configs/browserHistory\";\r\nimport socket from \"../../../configs/socket\";\r\nimport ListSearchTile from \"./ListSearchTile\";\r\nconst ChatList = (props) => {\r\n\tconst { addConversation, getConversation } = useContext(GlobalContext);\r\n\tconst [isSearchFocusing, updateSearchFocusing] = useState(false);\r\n\tconst [isMouseOverResult, updateMouseOverResult] = useState(false);\r\n\r\n\tconst [searchResult, setSearchResult] = useState([]);\r\n\r\n\tconst myId = localStorage.userId;\r\n\tconst fetchPeople = (query) => {\r\n\t\tconst options = {\r\n\t\t\turi: url.LOCAL + `/api/search?s=${query}`,\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t},\r\n\t\t};\r\n\t\trequest.get(options, function (err, httpResponse, body) {\r\n\t\t\tvar objBody = JSON.parse(body);\r\n\t\t\tconst userCurrent = localStorage.username;\r\n\t\t\tobjBody = objBody.result;\r\n\t\t\tconst indexCurrentUser = objBody.findIndex(\r\n\t\t\t\t(item) => item.username === userCurrent\r\n\t\t\t);\r\n\t\t\tobjBody = objBody.splice(indexCurrentUser + 1, 1);\r\n\t\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\t\tsearchResult.length = 0;\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tsetSearchResult([...objBody]);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst searchOnFocus = () => {\r\n\t\tupdateSearchFocusing(true);\r\n\t\tfetchPeople(\"\");\r\n\t};\r\n\r\n\tconst searchOutFocus = (event) => {\r\n\t\tevent.target.value = \"\";\r\n\t\tupdateSearchFocusing(false);\r\n\t};\r\n\r\n\tconst openConversation = (id) => {\r\n\t\tconst options = {\r\n\t\t\turi: url.LOCAL + `/api/conversation?id1=${myId}&id2=${id}`,\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\trequest.get(options, function (err, httpResponse, body) {\r\n\t\t\tif (err) return;\r\n\r\n\t\t\tif (httpResponse.statusCode === 200) {\r\n\t\t\t\tconst obj = JSON.parse(body);\r\n\r\n\t\t\t\tconst newConversation = getConversation(obj.conversation._id);\r\n\t\t\t\tif (newConversation) {\r\n\t\t\t\t} else {\r\n\t\t\t\t\taddConversation(obj.conversation);\r\n\t\t\t\t\tsocket.emit(\"new-conversation\", {\r\n\t\t\t\t\t\tconversation: obj.conversation,\r\n\t\t\t\t\t\tcreateId: localStorage.userId,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tupdateSearchFocusing(false);\r\n\t\t\t\tupdateMouseOverResult(false);\r\n\t\t\t\thistory.push(`/admin/chat/${obj.conversation._id}`);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst setMouseOverResult = (isOver) => {\r\n\t\tupdateMouseOverResult(isOver);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"float-1\">\r\n\t\t\t<div className=\"chat-list\">\r\n\t\t\t\t<Panel />\r\n\t\t\t\t<SearchBar\r\n\t\t\t\t\tsearchOnFocus={searchOnFocus}\r\n\t\t\t\t\tsearchOutFocus={searchOutFocus}\r\n\t\t\t\t\tsearchPeople={fetchPeople}\r\n\t\t\t\t/>\r\n\t\t\t\t{!isSearchFocusing && !isMouseOverResult ? (\r\n\t\t\t\t\t<ListConversation\r\n\t\t\t\t\t\tclassName=\"flex-grow\"\r\n\t\t\t\t\t\tchatId={props.chatId}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ListSearchTile\r\n\t\t\t\t\t\tclassName=\"flex-grow\"\r\n\t\t\t\t\t\tlistResults={searchResult}\r\n\t\t\t\t\t\tsetMouse={setMouseOverResult}\r\n\t\t\t\t\t\topenConversation={openConversation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChatList;\r\n","import React from \"react\";\r\nimport getAvatar from \"../../../configs/getAvatar\";\r\n\r\nconst TitleBar = ({ name }) => {\r\n\treturn (\r\n\t\t<div className=\"title-bar\">\r\n\t\t\t<div className=\"d-flex bg-part\">\r\n\t\t\t\t<div className=\"d-flex align-items-center px-2\">\r\n\t\t\t\t\t<img src={getAvatar(name)} className=\"avt-ico\" alt=\"avt\" />\r\n\t\t\t\t\t<h1 className=\"display-5\">{name}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TitleBar;\r\n","import React from 'react';\r\nimport getAvatar from '../../../configs/getAvatar';\r\nconst SingleMessage = ({ message, myId, name }) => {\r\n  return message.ofUser !== myId ? (\r\n    <div className='flex mx-3 mt-4 max-w-xs'>\r\n      <img\r\n        src={getAvatar(name)}\r\n        alt='avatar'\r\n        className='h-8 w-8 self-end mr-2'\r\n      />\r\n      <div className='py-2 px-4 bg-gray-300 rounded-xl'>\r\n        <p className='text-black max-w-xs break-words'>{message.content}</p>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className='mx-3 mt-4 flex self-end'>\r\n      <div className='py-2 px-4 bg-gray-900 rounded-xl  '>\r\n        <p className='text-white max-w-xs break-words'>{message.content}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleMessage;\r\n","import React from 'react';\r\nimport getAvatar from '../../../configs/getAvatar';\r\n\r\nconst TypingIndicator = ({ name }) => {\r\n  return (\r\n    <div className='flex mx-3 mt-4 max-w-xs'>\r\n      <img\r\n        src={getAvatar(name)}\r\n        alt='avatar'\r\n        className='h-8 w-8 self-end mr-2'\r\n      />\r\n      <div className='py-2 px-4 bg-gray-300 rounded-xl'>\r\n        <div className='text-black max-w-xs break-words'>\r\n          <div className='ticontainer'>\r\n            <div className='tiblock'>\r\n              <div className='tidot'></div>\r\n              <div className='tidot'></div>\r\n              <div className='tidot'></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TypingIndicator;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport SingleMessage from './SingleMessage';\r\nimport { animateScroll } from 'react-scroll';\r\nimport { GlobalContext } from '../../../contexts/ConversationState';\r\nimport socket from '../../../configs/socket';\r\nimport TypingIndicator from './TypingIndicator';\r\nimport url from '../../../configs/url';\r\nimport request from 'request';\r\n\r\nconst MessageList = props => {\r\n  const { isReady, newMessage } = useContext(GlobalContext);\r\n\r\n  const cvs = props.conversation;\r\n  const userId = localStorage.userId;\r\n  const [messages, setMessages] = useState([]);\r\n  const [otherTyping, setOtherTyping] = useState(false);\r\n  const [otherName, setOtherName] = useState('');\r\n  const [isLoading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setMessages([]);\r\n    if (cvs._id) {\r\n      const options = {\r\n        uri: `${url.LOCAL}/api/get-messages?cid=${cvs._id}`,\r\n        method: 'get',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${localStorage.chattoken}`\r\n        }\r\n      };\r\n\r\n      request.get(options, function(err, httpResponse, body) {\r\n        if (httpResponse.statusCode === 200) {\r\n          const { messageList } = JSON.parse(body);\r\n          setMessages(messageList);\r\n          setLoading(false);\r\n        }\r\n      });\r\n      socket.on('user-typing', ({ cid, uid, isTyping, name }) => {\r\n        if (cid === cvs._id && uid !== userId) {\r\n          setOtherName(name);\r\n          if (isTyping !== otherTyping) {\r\n            setOtherTyping(isTyping);\r\n          } else {\r\n            setOtherTyping(false);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [isReady, cvs._id]);\r\n\r\n  useEffect(() => {\r\n    if (cvs._id && newMessage) {\r\n      if (cvs._id === newMessage.cid) {\r\n        setMessages([...messages, newMessage.message]);\r\n      }\r\n    }\r\n  }, [newMessage]);\r\n  \r\n  useEffect(() => {\r\n    animateScroll.scrollToBottom({\r\n      containerId: 'messages',\r\n      smooth: false,\r\n      duration: 0\r\n    });\r\n  }, [messages, otherTyping, isLoading]);\r\n\r\n  return (\r\n    <div\r\n      className='bg-white flex-grow d-flex flex-col overflow-y-auto max-height'\r\n      id='messages'\r\n    >\r\n      {isLoading ? (\r\n        // <div className='spinner-md flex-grow'>A</div>\r\n        ''\r\n      ) : (\r\n        messages.map(el => (\r\n          <SingleMessage\r\n            key={el._id || Date.now()}\r\n            name={props.name}\r\n            message={el}\r\n            myId={userId}\r\n          />\r\n        ))\r\n      )}\r\n\r\n      {otherTyping ? <TypingIndicator name={otherName} /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageList;\r\n","import React, { useRef, useContext, useState, useEffect } from \"react\";\r\nimport request from \"request\";\r\nimport url from \"../../../configs/url\";\r\nimport { GlobalContext } from \"../../../contexts/ConversationState\";\r\nimport socket from \"../../../configs/socket\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\n\r\nconst InputPanel = ({ cid, uid }) => {\r\n\tconsole.log(cid + \", \" + uid);\r\n\tconst chatFieldRef = useRef(null);\r\n\tconst { updateConversation, addNewMessage, isReady } = useContext(\r\n\t\tGlobalContext\r\n\t);\r\n\tconst [isSending, setSending] = useState(false);\r\n\tconst [block, setBlock] = useState(false);\r\n\r\n\tconst [openEmoji, setOpenEmoji] = useState(\"none\");\r\n\tconsole.log(openEmoji);\r\n\tconst [chosenEmoji, setChosenEmoji] = useState(null);\r\n\r\n\tconst onEmojiClick = (event, emojiObject) => {\r\n\t\tsetChosenEmoji(emojiObject);\r\n\t\tchatFieldRef.current.value += emojiObject.emoji;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isReady) {\r\n\t\t\tconst info = {\r\n\t\t\t\tid: uid,\r\n\t\t\t};\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + `/api/getuser`,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...info,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tvar objBody = JSON.parse(body);\r\n\t\t\t\tif (httpResponse.statusCode === 200) {\r\n\t\t\t\t\tconsole.log(objBody.result.isBlock);\r\n\t\t\t\t\tsetBlock(objBody.result.isBlock);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}, [isReady]);\r\n\r\n\tlet timeout = null;\r\n\tconst myUsername = localStorage.username;\r\n\tconst sendMessage = () => {\r\n\t\tconst content = chatFieldRef.current.value;\r\n\t\tchatFieldRef.current.value = \"\";\r\n\t\tif (!content || content === \"\") return;\r\n\t\tsetSending(true);\r\n\t\tconst options = {\r\n\t\t\turi: `${url.LOCAL}/api/send-message`,\r\n\t\t\tmethod: \"post\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tcid: cid,\r\n\t\t\t\tuid: uid,\r\n\t\t\t\tcontent: content,\r\n\t\t\t\tusername: myUsername,\r\n\t\t\t}),\r\n\t\t};\r\n\r\n\t\trequest.post(options, function (err, httpResponse, body) {\r\n\t\t\tif (httpResponse.statusCode !== 200) {\r\n\t\t\t} else {\r\n\t\t\t\tconst obj = JSON.parse(body);\r\n\t\t\t\taddNewMessage({\r\n\t\t\t\t\tconversation: obj.conversation,\r\n\t\t\t\t\tmessage: obj.newMessage,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tupdateConversation(obj.conversation);\r\n\t\t\t\tif (timeout) clearTimeout(timeout);\r\n\t\t\t\tstoppedTyping();\r\n\t\t\t\tsocket.emit(\"user-send-message\", {\r\n\t\t\t\t\tconversation: obj.conversation,\r\n\t\t\t\t\tnewMessage: obj.newMessage,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetSending(false);\r\n\t\t});\r\n\t};\r\n\r\n\tconst stoppedTyping = () => {\r\n\t\tsocket.emit(\"user-typing-message\", {\r\n\t\t\tcid: cid,\r\n\t\t\tuid: uid,\r\n\t\t\tisTyping: false,\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"w-full h-16 bg-white flex p-2\">\r\n\t\t\t<div className=\"flex-grow flex-shrink d-flex align-items-center position-relative\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tdisabled={block}\r\n\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\tref={chatFieldRef}\r\n\t\t\t\t\tclassName=\"px-4 py-2 w-full bg-gray-300 text-gray-900 rounded-full outline-none truncate\"\r\n\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\tsocket.emit(\"user-typing-message\", {\r\n\t\t\t\t\t\t\tcid: cid,\r\n\t\t\t\t\t\t\tuid: uid,\r\n\t\t\t\t\t\t\tisTyping: true,\r\n\t\t\t\t\t\t\tname: myUsername,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (timeout) clearTimeout(timeout);\r\n\t\t\t\t\t\ttimeout = setTimeout(stoppedTyping, 1500);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonKeyPress={(event) => {\r\n\t\t\t\t\t\tif (event.key === \"Enter\" || event.keyCode === 13) {\r\n\t\t\t\t\t\t\tsendMessage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tplaceholder={\r\n\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t? \"You have blocked chat\"\r\n\t\t\t\t\t\t\t: \"Input your message...\"\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"sticker position-absolute\"\r\n\t\t\t\t\tstyle={{ display: openEmoji }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<EmojiPicker onEmojiClick={onEmojiClick} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"btn-emoji\"\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tsetOpenEmoji(openEmoji === \"none\" ? \"block\" : \"none\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle={{display: block?'none':'block'}}\r\n\t\t\t\t></div>\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclassName=\"flex-shrink-0 my-1 mx-2 bg-blue-500 rounded-full  focus:outline-none\"\r\n\t\t\t\tstyle={{ flexBasis: 50 }}\r\n\t\t\t\tonClick={sendMessage}\r\n\t\t\t\tdisabled={isSending||block}\r\n\t\t\t>\r\n\t\t\t\t{isSending ? (\r\n\t\t\t\t\t<div className=\"spinner\">A</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"flex items-center justify-center text-white \">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclassName=\"h-4 w-4 fill-current\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 1000 1000\"\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M10,991.1l980-493.2L10,8.9l101.1,415.7l532.7,73.4l-532.7,70.5L10,991.1z\" />\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default InputPanel;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport TitleBar from \"./TitleBar\";\r\nimport MessageList from \"./MessageList\";\r\nimport InputPanel from \"./InputPanel\";\r\nimport { GlobalContext } from \"../../../contexts/ConversationState\";\r\nimport socket from \"../../../configs/socket\";\r\nimport EmojiPicker from './EmojiPicker';\r\n// import { history } from '../../../configs/browserHistory';\r\n\r\nconst ChatBox = ({ chatId, userId }) => {\r\n\tconst {\r\n\t\tgetConversation,\r\n\t\tupdateConversation,\r\n\t\taddConversation,\r\n\t\taddNewMessage,\r\n\t\tisReady,\r\n\t} = useContext(GlobalContext);\r\n\tconst cvs = getConversation(chatId);\r\n\tconst otherUsername =\r\n\t\t(userId === cvs.firstId ? cvs.secondUserName : cvs.firstUserName) || \"\";\r\n\tuseEffect(() => {\r\n\t\tif (isReady) {\r\n\t\t\tsocket.on(\"receive-message\", ({ conversation, newMessage }) => {\r\n\t\t\t\tconst cvs = getConversation(conversation._id);\r\n\t\t\t\tif (cvs) {\r\n\t\t\t\t\tif (localStorage.username === conversation.lastSender)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tupdateConversation(conversation);\r\n\t\t\t\t\taddNewMessage({\r\n\t\t\t\t\t\tconversation: conversation,\r\n\t\t\t\t\t\tmessage: newMessage,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\taddConversation(conversation);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}, [isReady]);\r\n\r\n\treturn (\r\n\t\t<div className=\"float-2\">\r\n\t\t\t<div className=\"chat-box\">\r\n\t\t\t\t<TitleBar name={otherUsername} className=\"self-start\" />\r\n\t\t\t\t<MessageList name={otherUsername} conversation={cvs} />\r\n\t\t\t\t<div className=\"w-full px-4 mt-1\">\r\n\t\t\t\t\t<InputPanel\r\n\t\t\t\t\t\tcid={chatId}\r\n\t\t\t\t\t\tuid={userId}\r\n\t\t\t\t\t\tclassName=\"w-7/8 self-end\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChatBox;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport request from \"request\";\r\nimport url from \"../../../configs/url\";\r\nimport { GlobalContext } from \"../../../contexts/ConversationState\";\r\n\r\nconst Info = (props) => {\r\n\tconst [user, setUser] = useState([]);\r\n\tconst [block, setBlock] = useState(false);\r\n\tconst [unblock, setUnBlock] = useState(false);\r\n\tconst { getConversation, isReady } = useContext(GlobalContext);\r\n\tconst cvs = getConversation(props.chatId);\r\n\tlet idGuess = \"\";\r\n\tif (cvs) {\r\n\t\tidGuess = props.userId === cvs.firstId ? cvs.secondId : cvs.firstId;\r\n\t\tconsole.log(idGuess);\r\n\t}\r\n\tlet info = [];\r\n\tif (idGuess !== \"\") {\r\n\t\tinfo = {\r\n\t\t\tid: idGuess,\r\n\t\t};\r\n\t}\r\n\r\n\tconst handleBlock = (idBlock) => {\r\n\t\tif (isReady) {\r\n\t\t\tconst process = {\r\n\t\t\t\turi: url.LOCAL + \"/api/block_chat\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tid: idBlock,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\tif (httpResponse.statusCode === 200) {\r\n\t\t\t\t\tsetBlock(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isReady) {\r\n\t\t\tconst getUser = () => {\r\n\t\t\t\tconst process = {\r\n\t\t\t\t\turi: url.LOCAL + `/api/getuser`,\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\tAuthorization: `Bearer ${localStorage.chattoken}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t...info,\r\n\t\t\t\t\t}),\r\n\t\t\t\t};\r\n\r\n\t\t\t\trequest.post(process, (err, httpResponse, body) => {\r\n\t\t\t\t\tvar objBody = JSON.parse(body);\r\n\t\t\t\t\tif (httpResponse.statusCode === 200) {\r\n\t\t\t\t\t\tsetUser(objBody.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tgetUser();\r\n\t\t}\r\n\t}, [idGuess]);\r\n\r\n\treturn (\r\n\t\t<div className=\"float-3\">\r\n\t\t\t{user.rule === \"user\" ? (\r\n\t\t\t\t<div className=\"info-user\">\r\n\t\t\t\t\t<div className=\"px-2 title-bar d-flex align-items-center\">\r\n\t\t\t\t\t\t<h2>Công cụ</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t<h3 className=\"text-center mb-3\">Thông tin user</h3>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tID:{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"text-border\">{user._id}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tHọ và tên:\r\n\t\t\t\t\t\t\t\t<span className=\"text-border\">\r\n\t\t\t\t\t\t\t\t\t{user.fullname}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tUsername:{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"text-border\">\r\n\t\t\t\t\t\t\t\t\t{user.username}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tEmail:{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"text-border\">\r\n\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<hr className=\"my-5\" />\r\n\t\t\t\t\t<div className=\"tool\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleBlock(idGuess)}\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-danger\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCấm chat\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t\"\"\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Info;\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport { GlobalProvider } from \"../../contexts/ConversationState\";\r\nimport ChatList from \"./ChatList/ChatList\";\r\nimport ChatBox from \"./ChatBox/ChatBox\";\r\nimport Info from \"./User/Info\";\r\n\r\nconst Chat = (props) => {\r\n\tconst userId = localStorage.userId;\r\n\tconst chatId = props.match.params.id;\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Chat\";\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<GlobalProvider>\r\n\t\t\t<div className=\"chat\">\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<div className=\"float-content\">\r\n\t\t\t\t\t\t<ChatList chatId={chatId} />\r\n\t\t\t\t\t\t<ChatBox chatId={chatId} userId={userId} />\r\n\t\t\t\t\t\t<Info chatId={chatId} userId={userId} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</GlobalProvider>\r\n\t);\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Route, Router, Switch } from \"react-router-dom\";\r\n\r\nimport { history } from \"./configs/browserHistory\";\r\n\r\nimport LoginAdmin from \"./components/Authentication/LoginAdmin\";\r\nimport RegisterAdmin from \"./components/Authentication/RegisterAdmin\";\r\nimport LoginUser from \"./components/Authentication/LoginUser\";\r\nimport RegisterUser from \"./components/Authentication/RegisterUser\";\r\n\r\nimport Chat from \"./components/Chat/Chat\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./assets/styles.scss\";\r\nimport \"./assets/tailwind.css\";\r\nimport \"./assets/main.css\";\r\n\r\nclass App extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Router history={history}>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/admin\" component={LoginAdmin} />\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath=\"/admin/register\"\r\n\t\t\t\t\t\tcomponent={RegisterAdmin}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route exact path=\"/\" component={LoginUser} />\r\n\t\t\t\t\t<Route exact path=\"/register\" component={RegisterUser} />\r\n\t\t\t\t\t<Route exact path=\"/admin/chat\" component={Chat} />\r\n\t\t\t\t\t<Route exact path=\"/admin/chat/:id\" component={Chat} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t);\r\n\t}\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}